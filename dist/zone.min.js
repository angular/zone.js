!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(this,function(){"use strict";function e(e,t){for(var n=e.length-1;n>=0;n--)"function"==typeof e[n]&&(e[n]=Zone.current.wrap(e[n],t+"_"+n));return e}function t(t,n){for(var r=t.constructor.name,o=function(o){var a=n[o],i=t[a];i&&(t[a]=function(t){return function(){return t.apply(this,e(arguments,r+"."+a))}}(i))},a=0;a<n.length;a++)o(a)}function n(e,t){var n=Object.getOwnPropertyDescriptor(e,t)||{enumerable:!0,configurable:!0};delete n.writable,delete n.value;var r=t.substr(2),o="_"+t;n.set=function(e){if(this[o]&&this.removeEventListener(r,this[o]),"function"==typeof e){var t=function(t){var n;n=e.apply(this,arguments),void 0==n||n||t.preventDefault()};this[o]=t,this.addEventListener(r,t,!1)}else this[o]=null},n.get=function(){return this[o]||null},Object.defineProperty(e,t,n)}function r(e,t){var r=[];for(var o in e)"on"==o.substr(0,2)&&r.push(o);for(var a=0;a<r.length;a++)n(e,r[a]);if(t)for(var i=0;i<t.length;i++)n(e,"on"+t[i])}function o(e,t,n,r,o){var a=e[P];if(a)for(var i=0;i<a.length;i++){var u=a[i],c=u.data,l=c.handler;if((c.handler===t||l.listener===t)&&c.useCapturing===r&&c.eventName===n)return o&&a.splice(i,1),u}return null}function a(e,t,n){var r=e[P];r||(r=e[P]=[]),n?r.unshift(t):r.push(t)}function i(e,t,n,r,i){function u(e){var t=e.data;return a(t.target,e,i),t.target[l](t.eventName,e.invoke,t.useCapturing)}function c(e){var t=e.data;o(t.target,e.invoke,t.eventName,t.useCapturing,!0),t.target[p](t.eventName,e.invoke,t.useCapturing)}void 0===n&&(n=!0),void 0===r&&(r=!1),void 0===i&&(i=!1);var l=T(e),p=T(t),s=!n&&void 0;return function(t,n){var a=n[0],i=n[1],p=n[2]||s,f=t||L,d=null;"function"==typeof i?d=i:i&&i.handleEvent&&(d=function(e){return i.handleEvent(e)});var v=!1;try{v=i&&"[object FunctionWrapper]"===i.toString()}catch(g){return}if(!d||v)return f[l](a,i,p);if(!r){var y=o(f,i,a,p,!1);if(y)return f[l](a,y.invoke,p)}var b=Zone.current,h=f.constructor.name+"."+e+":"+a,m={target:f,eventName:a,name:a,useCapturing:p,handler:i};b.scheduleEventTask(h,d,m,u,c)}}function u(e,t){void 0===t&&(t=!0);var n=T(e),r=!t&&void 0;return function(e,t){var a=t[0],i=t[1],u=t[2]||r,c=e||L,l=o(c,i,a,u,!0);l?l.zone.cancelTask(l):c[n](a,i,u)}}function c(e){return!(!e||!e.addEventListener)&&(s(e,C,function(){return R}),s(e,S,function(){return q}),!0)}function l(t){var n=L[t];if(n){L[t]=function(){var r=e(arguments,t);switch(r.length){case 0:this[B]=new n;break;case 1:this[B]=new n(r[0]);break;case 2:this[B]=new n(r[0],r[1]);break;case 3:this[B]=new n(r[0],r[1],r[2]);break;case 4:this[B]=new n(r[0],r[1],r[2],r[3]);break;default:throw new Error("Arg list too long.")}};var r,o=new n(function(){});for(r in o)"XMLHttpRequest"===t&&"responseBlob"===r||!function(e){"function"==typeof o[e]?L[t].prototype[e]=function(){return this[B][e].apply(this[B],arguments)}:Object.defineProperty(L[t].prototype,e,{set:function(n){"function"==typeof n?this[B][e]=Zone.current.wrap(n,t+"."+e):this[B][e]=n},get:function(){return this[B][e]}})}(r);for(r in n)"prototype"!==r&&n.hasOwnProperty(r)&&(L[t][r]=n[r])}}function p(e,t){try{return Function("f","return function "+e+"(){return f(this, arguments)}")(t)}catch(n){return function(){return t(this,arguments)}}}function s(e,t,n){for(var r=e;r&&Object.getOwnPropertyNames(r).indexOf(t)===-1;)r=Object.getPrototypeOf(r);!r&&e[t]&&(r=e);var o,a=T(t);return r&&!(o=r[a])&&(o=r[a]=r[t],r[t]=p(t,n(o,a,t))),o}function f(e,t,n,r){function o(t){var n=t.data;return n.args[0]=function(){t.invoke.apply(this,arguments),delete c[n.handleId]},n.handleId=i.apply(e,n.args),c[n.handleId]=t,t}function a(e){return delete c[e.data.handleId],u(e.data.handleId)}var i=null,u=null;t+=r,n+=r;var c={};i=s(e,t,function(n){return function(i,u){if("function"==typeof u[0]){var c=Zone.current,l={handleId:null,isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?u[1]||0:null,args:u},p=c.scheduleMacroTask(t,u[0],l,o,a);if(!p)return p;var s=p.data.handleId;return s.ref&&s.unref&&(p.ref=s.ref.bind(s),p.unref=s.unref.bind(s)),p}return n.apply(e,u)}}),u=s(e,n,function(t){return function(n,r){var o="number"==typeof r[0]?c[r[0]]:r[0];o&&"string"==typeof o.type?(o.cancelFn&&o.data.isPeriodic||0===o.runCount)&&o.zone.cancelTask(o):t.apply(e,r)}})}function d(){Object.defineProperty=function(e,t,n){if(g(e,t))throw new TypeError("Cannot assign to read only property '"+t+"' of "+e);var r=n.configurable;return"prototype"!==t&&(n=y(e,t,n)),b(e,t,n,r)},Object.defineProperties=function(e,t){return Object.keys(t).forEach(function(n){Object.defineProperty(e,n,t[n])}),e},Object.create=function(e,t){return"object"!=typeof t||Object.isFrozen(t)||Object.keys(t).forEach(function(n){t[n]=y(e,n,t[n])}),x(e,t)},Object.getOwnPropertyDescriptor=function(e,t){var n=F(e,t);return g(e,t)&&(n.configurable=!1),n}}function v(e,t,n){var r=n.configurable;return n=y(e,t,n),b(e,t,n,r)}function g(e,t){return e&&e[W]&&e[W][t]}function y(e,t,n){return n.configurable=!0,n.configurable||(e[W]||H(e,W,{writable:!0,value:{}}),e[W][t]=!0),n}function b(e,t,n,r){try{return H(e,t,n)}catch(o){if(!n.configurable)throw o;"undefined"==typeof r?delete n.configurable:n.configurable=r;try{return H(e,t,n)}catch(o){var a=null;try{a=JSON.stringify(n)}catch(o){a=a.toString()}console.log("Attempting to configure '"+t+"' with descriptor '"+a+"' on object '"+e+"' and got error, giving up: "+o)}}}function h(e){var t=[],n=e.wtf;n?t=X.split(",").map(function(e){return"HTML"+e+"Element"}).concat(Z):e[z]?t.push(z):t=Z;for(var r=0;r<t.length;r++){var o=e[t[r]];c(o&&o.prototype)}}function m(e){var t=e.WebSocket;e.EventTarget||c(t.prototype),e.WebSocket=function(e,n){var o,a=arguments.length>1?new t(e,n):new t(e),i=Object.getOwnPropertyDescriptor(a,"onmessage");return i&&i.configurable===!1?(o=Object.create(a),["addEventListener","removeEventListener","send","close"].forEach(function(e){o[e]=function(){return a[e].apply(a,arguments)}})):o=a,r(o,["close","error","message","open"]),o};for(var n in t)e.WebSocket[n]=t[n]}function w(e){if(!D){var t="undefined"!=typeof WebSocket;k()?(M&&r(HTMLElement.prototype,A),r(XMLHttpRequest.prototype,null),"undefined"!=typeof IDBIndex&&(r(IDBIndex.prototype,null),r(IDBRequest.prototype,null),r(IDBOpenDBRequest.prototype,null),r(IDBDatabase.prototype,null),r(IDBTransaction.prototype,null),r(IDBCursor.prototype,null)),t&&r(WebSocket.prototype,null)):(O(),l("XMLHttpRequest"),t&&m(e))}}function k(){if(M&&!Object.getOwnPropertyDescriptor(HTMLElement.prototype,"onclick")&&"undefined"!=typeof Element){var e=Object.getOwnPropertyDescriptor(Element.prototype,"onclick");if(e&&!e.configurable)return!1}Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{get:function(){return!0}});var t=new XMLHttpRequest,n=!!t.onreadystatechange;return Object.defineProperty(XMLHttpRequest.prototype,"onreadystatechange",{}),n}function O(){for(var e=function(e){var t=A[e],n="on"+t;self.addEventListener(t,function(e){var t,r,o=e.target;for(r=o?o.constructor.name+"."+n:"unknown."+n;o;)o[n]&&!o[n][N]&&(t=Zone.current.wrap(o[n],r),t[N]=o[n],o[n]=t),o=o.parentElement},!0)},t=0;t<A.length;t++)e(t)}function E(e){if(M&&"registerElement"in e.document){var t=document.registerElement,n=["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"];document.registerElement=function(e,r){return r&&r.prototype&&n.forEach(function(e){var t="Document.registerElement::"+e;if(r.prototype.hasOwnProperty(e)){var n=Object.getOwnPropertyDescriptor(r.prototype,e);n&&n.value?(n.value=Zone.current.wrap(n.value,t),v(r.prototype,e,n)):r.prototype[e]=Zone.current.wrap(r.prototype[e],t)}else r.prototype[e]&&(r.prototype[e]=Zone.current.wrap(r.prototype[e],t))}),t.apply(document,[e,r])}}}function j(e){function t(e){var t=e[Q];return t}function n(e){var t=e.data;t.target.addEventListener("readystatechange",function(){t.target.readyState===t.target.DONE&&(t.aborted||e.invoke())});var n=t.target[Q];return n||(t.target[Q]=e),i.apply(t.target,t.args),e}function r(){}function o(e){var t=e.data;return t.aborted=!0,u.apply(t.target,t.args)}var a=s(e.XMLHttpRequest.prototype,"open",function(){return function(e,t){return e[Y]=0==t[2],a.apply(e,t)}}),i=s(e.XMLHttpRequest.prototype,"send",function(){return function(e,t){var a=Zone.current;if(e[Y])return i.apply(e,t);var u={target:e,isPeriodic:!1,delay:null,args:t,aborted:!1};return a.scheduleMacroTask("XMLHttpRequest.send",r,u,n,o)}}),u=s(e.XMLHttpRequest.prototype,"abort",function(e){return function(e,n){var r=t(e);if(r&&"string"==typeof r.type){if(null==r.cancelFn)return;r.zone.cancelTask(r)}}})}var T=Zone.__symbol__,L="object"==typeof window&&window||"object"==typeof self&&self||global,I="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,D="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),M=!D&&!I&&!("undefined"==typeof window||!window.HTMLElement),P=T("eventTasks"),C="addEventListener",S="removeEventListener",R=i(C,S),q=u(S),B=T("originalInstance"),H=Object[T("defineProperty")]=Object.defineProperty,F=Object[T("getOwnPropertyDescriptor")]=Object.getOwnPropertyDescriptor,x=Object.create,W=T("unconfigurables"),X="Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video",Z="ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Window,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex,WebSocket".split(","),z="EventTarget",A="copy cut paste abort blur focus canplay canplaythrough change click contextmenu dblclick drag dragend dragenter dragleave dragover dragstart drop durationchange emptied ended input invalid keydown keypress keyup load loadeddata loadedmetadata loadstart message mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup pause play playing progress ratechange reset scroll seeked seeking select show stalled submit suspend timeupdate volumechange waiting mozfullscreenchange mozfullscreenerror mozpointerlockchange mozpointerlockerror error webglcontextrestored webglcontextlost webglcontextcreationerror".split(" "),N=T("unbound"),_="set",G="clear",K=["alert","prompt","confirm"],U="object"==typeof window&&window||"object"==typeof self&&self||global;f(U,_,G,"Timeout"),f(U,_,G,"Interval"),f(U,_,G,"Immediate"),f(U,"request","cancel","AnimationFrame"),f(U,"mozRequest","mozCancel","AnimationFrame"),f(U,"webkitRequest","webkitCancel","AnimationFrame");for(var V=0;V<K.length;V++){var J=K[V];s(U,J,function(e,t,n){return function(t,r){return Zone.current.run(e,U,r,n)}})}h(U),w(U),l("MutationObserver"),l("WebKitMutationObserver"),l("FileReader"),d(),E(U),j(U);var Q=T("xhrTask"),Y=T("xhrSync");U.navigator&&U.navigator.geolocation&&t(U.navigator.geolocation,["getCurrentPosition","watchPosition"])});